# [ë–¡ìƒ - Project Overview](https://www.dducksang.com)

![Python](https://img.shields.io/badge/Python-3.12-3776AB?logo=python&logoColor=white)
![TypeScript](https://img.shields.io/badge/TypeScript-5.0+-3178C6?logo=typescript&logoColor=white)
![Next.js](https://img.shields.io/badge/Next.js-15-000000?logo=next.js&logoColor=white)
![FastAPI](https://img.shields.io/badge/FastAPI-0.115-009688?logo=fastapi&logoColor=white)
![LangGraph](https://img.shields.io/badge/LangGraph-0.5+-FF6B6B)
![LangChain](https://img.shields.io/badge/LangChain-0.3-1C3C3C?logo=langchain&logoColor=white)
![PostgreSQL](https://img.shields.io/badge/PostgreSQL-4169E1?logo=postgresql&logoColor=white)
![Redis](https://img.shields.io/badge/Redis-DC382D?logo=redis&logoColor=white)
![Railway](https://img.shields.io/badge/Railway-0B0D0E?logo=railway&logoColor=white)

## AI Investment OS

---

## ëª©ì°¨

- [AI Investment OS](#ai-investment-os)
- [í•µì‹¬ ì°¨ë³„ì ](#í•µì‹¬-ì°¨ë³„ì )
- [ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
- [ë°ì´í„° íŒŒì´í”„ë¼ì¸](#ë°ì´í„°-íŒŒì´í”„ë¼ì¸)
- [AI ì±„íŒ… ì‹œìŠ¤í…œ](#ai-ì±„íŒ…-ì‹œìŠ¤í…œ)
- [í€€íŠ¸ ë¶„ì„ ì—”ì§„](#í€€íŠ¸-ë¶„ì„-ì—”ì§„)
- [í¬íŠ¸í´ë¦¬ì˜¤ ì—”ì§„](#í¬íŠ¸í´ë¦¬ì˜¤-ì—”ì§„)
- [ì¢…ëª© íˆ¬ì ì „ëµ Multi-Agent](#ì¢…ëª©-íˆ¬ì-ì „ëµ-multi-agent)
- [ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ](#ë°ì´í„°ë² ì´ìŠ¤-ìŠ¤í‚¤ë§ˆ)
- [í”„ë¡œì íŠ¸ êµ¬ì¡°](#í”„ë¡œì íŠ¸-êµ¬ì¡°)
- [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
- [ë¼ì´ì„ ìŠ¤](#ë¼ì´ì„ ìŠ¤)

---

## AI Investment OS

### The Operating System for Retail Capital

AI Investment OSëŠ” ê°œì¸ íˆ¬ììë¥¼ ìœ„í•œ
**ì„¤ëª… ê°€ëŠ¥í•œ(Explainable) ì ì‘í˜• í€€íŠ¸ ê¸°ë°˜ íˆ¬ì ìš´ì˜ì²´ì œ**ì…ë‹ˆë‹¤.

> ìš°ë¦¬ëŠ” íˆ¬ì ì •ë³´ë¥¼ ì œê³µí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
> ìš°ë¦¬ëŠ” **ê°œì¸ ìë³¸ì„ êµ¬ì¡°ì ìœ¼ë¡œ ìš´ì˜**í•©ë‹ˆë‹¤.

### 1. Service Overview

AI Investment OSëŠ” ë‹¤ìŒì„ í†µí•©í•©ë‹ˆë‹¤:

- **Market-Aware Adaptive Quant Engine**
- ì „ëµ ìë™ ìƒì„± ë° ë¦¬ë°¸ëŸ°ì‹± ì„¤ê³„
- ë¦¬ìŠ¤í¬ ì˜ˆì‚° ìë™ ì¡°ì •
- ëŒ€í™”í˜• ì¸í„°í˜ì´ìŠ¤ ê¸°ë°˜ í¬íŠ¸í´ë¦¬ì˜¤ ì„¤ê³„
- ì‚¬ìš©ì ìŠ¹ì¸ ê¸°ë°˜ ë°˜ìë™ ì‹¤í–‰ êµ¬ì¡°

> ì´ ì‹œìŠ¤í…œì€ í•˜ë‚˜ì˜ í€ë“œê°€ ì•„ë‹™ë‹ˆë‹¤.
> ê° ì‚¬ìš©ìì˜ ë…ë¦½ ê³„ì¢Œ ìœ„ì—ì„œ ì‘ë™í•˜ëŠ” **ë¶„ì‚°í˜• íˆ¬ì OS**ì…ë‹ˆë‹¤.

### 2. Problem Definition

**ê°œì¸ íˆ¬ìì—ëŠ” 'ìš´ì˜ì²´ì œ'ê°€ ì—†ë‹¤**

í˜„ì¬ ì‹œì¥ì—ëŠ” ë¦¬ì„œì¹˜ ë¦¬í¬íŠ¸, ë°ì´í„° í”Œë«í¼, ë‰´ìŠ¤ ì„œë¹„ìŠ¤, ìë™ë§¤ë§¤ íˆ´, ìœ íŠœë¸Œ/ì»¤ë®¤ë‹ˆí‹° ë¶„ì„ì´ ì¡´ì¬í•©ë‹ˆë‹¤.
ê·¸ëŸ¬ë‚˜ ì´ë“¤ì€ ëª¨ë‘ **ì •ë³´ ì œê³µì**ì…ë‹ˆë‹¤. ìµœì¢… ê²°ì •ê³¼ ë¦¬ìŠ¤í¬ëŠ” ê°œì¸ì´ ê°ë‹¹í•´ì•¼ í•©ë‹ˆë‹¤.

**êµ¬ì¡°ì  ë¬¸ì œ**

| ë¬¸ì œ | ì„¤ëª… |
|------|------|
| **ì •ë³´ ê³¼ì‰** | ì˜ì‚¬ê²°ì • í”¼ë¡œ |
| **ì „ëµì˜ ë‹¨í¸í™”** | ì¼ê´€ì„± ì—†ëŠ” íˆ¬ì íŒë‹¨ |
| **ë¦¬ìŠ¤í¬ ê´€ë¦¬ ë¶€ì¬** | ê°ì • ê°œì…, ì¼ê´€ì„± ì—†ëŠ” ì†ì ˆ/ìµì ˆ |
| **ë ˆì§ ë³€í™” ëŒ€ì‘ ë¶ˆê°€** | ì‹œì¥ êµ­ë©´ ì „í™˜ì— ëŒ€í•œ êµ¬ì¡°ì  ëŒ€ì‘ ë¶€ì¬ |

> ê²°ê³¼ì ìœ¼ë¡œ ê°œì¸ì€ ì§ˆë¬¸ì„ ë°˜ë³µí•©ë‹ˆë‹¤:
> **"ê·¸ë˜ì„œ ì§€ê¸ˆ ë‚´ ìë³¸ì€ ì–´ë–»ê²Œ ìš´ì˜ë˜ì–´ì•¼ í•˜ëŠ”ê°€?"**

### 3. Solution: AI Investment OS

> ìš°ë¦¬ëŠ” ë„êµ¬ê°€ ì•„ë‹ˆë¼ **ìš´ì˜ êµ¬ì¡°**ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

**Core Architecture**

**1. Explainable Adaptive Quant Engine**

- 4-Factor Multi-Factor êµ¬ì¡°
- ë™ì  ê°€ì¤‘ì¹˜ ì¡°ì •
- Market Regime ë¶„ë¥˜
- íŒ©í„° ìƒê´€ê´€ê³„ ë°˜ì˜
- ë¦¬ìŠ¤í¬ ì˜ˆì‚° ìë™ ì¡°ì ˆ

ëª¨ë“  ì˜ì‚¬ê²°ì •ì€ ì„¤ëª… ê°€ëŠ¥í•©ë‹ˆë‹¤: ì¢…ëª© í¸ì… ê·¼ê±°, íŒ©í„° ê¸°ì—¬ë„, ë ˆì§ íŒë‹¨ ê·¼ê±°, ë¦¬ìŠ¤í¬ ê³„ì‚° ë°©ì‹.

> ìš°ë¦¬ëŠ” ë¸”ë™ë°•ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

**2. Capacity-Aware Design (AUM Dilution ë°©ì§€ êµ¬ì¡°)**

ê¸°ê´€í˜• ì „ëµì˜ ë¬¸ì œëŠ” ìë³¸ ê·œëª¨ê°€ ì»¤ì§ˆìˆ˜ë¡ ì•ŒíŒŒê°€ í¬ì„ëœë‹¤ëŠ” ì ì…ë‹ˆë‹¤.

AI Investment OSëŠ”:

- ê°œì¸ ìë³¸ (ì†Œí˜• AUM) ìµœì í™”
- ë…ë¦½ ê³„ì¢Œ ê¸°ë°˜ ë¶„ì‚° ì‹¤í–‰
- ìœ ë™ì„± í•„í„° ìë™ ì¡°ì •
- ì „ëµ ìˆ˜ìš© ê°€ëŠ¥ ìë³¸(capacity) ì¶”ì •
- ì‹¤í–‰ ì‹œì  ë¶„ì‚°

> í™•ì¥ì€ ìë³¸ì˜ ì§‘í•©ì´ ì•„ë‹ˆë¼ **ì‚¬ìš©ì ìˆ˜ì˜ ì¦ê°€**ì…ë‹ˆë‹¤.

**3. Strategy Diversification Layer**

ì ë¦¼ ë°©ì§€ë¥¼ ìœ„í•´:

- ë©€í‹° ì „ëµ êµ¬ì¡°
- ì‚¬ìš©ì ë¦¬ìŠ¤í¬ í”„ë¡œíŒŒì¼ ê¸°ë°˜ ì „ëµ ì¡°í•©
- Popularity Pressure Control (ê³¼ë°€ë„ ê°ì§€ ì‹œ ìë™ ì¡°ì •)
- Dynamic Universe Expansion

> ìš°ë¦¬ëŠ” ì•ŒíŒŒë¥¼ ë³µì œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
> ìš°ë¦¬ëŠ” **ì•ŒíŒŒë¥¼ ë¶„ì‚°**ì‹œí‚µë‹ˆë‹¤.

**4. Semi-Automated Execution**

- í¬íŠ¸í´ë¦¬ì˜¤ ìë™ ì„¤ê³„
- ë¦¬ë°¸ëŸ°ì‹± ìë™ ì œì•ˆ
- ë¦¬ìŠ¤í¬ ê²½ê³ 
- ì‚¬ìš©ì ìŠ¹ì¸ ê¸°ë°˜ ì‹¤í–‰

> ì™„ì „ ìë™ì´ ì•„ë‹Œ **í†µì œëœ ìë™í™”(Controlled Automation)**ë¥¼ ì§€í–¥í•©ë‹ˆë‹¤.

### 4. Target Users

**Initial Target**

- í•œêµ­ ë° ë¯¸êµ­ ê°œì¸ íˆ¬ìì (ì´ˆë³´ ~ ì¤‘ìˆ˜)
- ë°”ìœ ì§ì¥ì¸
- íˆ¬ì í”„ë¡œì„¸ìŠ¤ë¥¼ êµ¬ì¡°í™”í•˜ê³  ì‹¶ì€ ì‚¬ìš©ì
- ê°ì • ê°œì…ì„ ì¤„ì´ê³  ì‹¶ì€ ì‚¬ìš©ì

**Expansion Target**

- ë©€í‹° ì „ëµ ìš´ìš©ì„ ì›í•˜ëŠ” ê³ ìˆ˜ íˆ¬ìì
- ê³„ëŸ‰ì  ë¦¬ìŠ¤í¬ ê´€ë¦¬ì— ê´€ì‹¬ ìˆëŠ” ì‚¬ìš©ì

### 5. Technology Roadmap

| Phase | ë‹¨ê³„ | ë‚´ìš© |
|-------|------|------|
| **Phase 1** | ì¸í”„ë¼ êµ¬ì¶• | í•œêµ­/ë¯¸êµ­ í€€íŠ¸ ì—”ì§„ + AI ë¹„ì„œ v1 / Strategy OS |
| **Phase 2** | ì´ˆê°œì¸í™” ì™„ì„± | ë©€í‹° ì „ëµ ê¸°ë°˜ ìœ ì €ë³„ ë§ì¶¤ ì „ëµ / Behavior Learning OS |
| **Phase 3** | UX í˜ì‹  | ëŒ€í™”í˜• ìì‚° ê´€ë¦¬ (Conversational UX) / Interface OS, Execution OS |
| **Phase 4** | ê¸€ë¡œë²Œ í™•ì¥ | ë¯¸êµ­ ì§ì ‘ ì§„ì¶œ ë° ê¸€ë¡œë²Œ ìì‚° ë°°ë¶„ / Data OS |


> ìš°ë¦¬ëŠ” ì „ëµì„ ìƒì„±í•˜ëŠ” AIê°€ ì•„ë‹ˆë¼
> **ì „ëµì„ ì§„í™”ì‹œí‚¤ëŠ” ì—”ì§„**ì„ êµ¬ì¶•í•©ë‹ˆë‹¤.

### 6. Philosophy

ìš°ë¦¬ëŠ” í€ë“œê°€ ì•„ë‹™ë‹ˆë‹¤.
ìš°ë¦¬ëŠ” ë¸Œë¡œì»¤ë¦¬ì§€ë„ ì•„ë‹™ë‹ˆë‹¤.
ìš°ë¦¬ëŠ” ë¶„ì„ íˆ´ë„ ì•„ë‹™ë‹ˆë‹¤.

**ìš°ë¦¬ëŠ” ê°œì¸ ìë³¸ ìœ„ì—ì„œ ì‘ë™í•˜ëŠ” íˆ¬ì ìš´ì˜ì²´ì œì…ë‹ˆë‹¤.**

> ê·¸ë¦¬ê³  ìš°ë¦¬ì˜ ëª©í‘œëŠ” ë‹¨ìˆœí•©ë‹ˆë‹¤.
> **ì˜ì‚¬ê²°ì • í”¼ë¡œê°ì˜ ì¢…ë§.**

---

## Phase 1 í•µì‹¬ ì°¨ë³„ì 

### 1. 3ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤ ì „ëµ

ëª¨ë“  ë¶„ì„ì— **ê°•ì„¸/íš¡ë³´/ì•½ì„¸** 3ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤ë³„ ëŒ€ì‘ ì „ëµ ì œê³µ

```mermaid
flowchart LR
    subgraph Analysis[ë¶„ì„ ê²°ê³¼]
        A[ì¢…ëª©/í¬íŠ¸í´ë¦¬ì˜¤ ë¶„ì„]
    end

    subgraph Scenarios[3ê°€ì§€ ì‹œë‚˜ë¦¬ì˜¤]
        B[ê°•ì„¸ Bullish]
        C[íš¡ë³´ Sideways]
        D[ì•½ì„¸ Bearish]
    end

    subgraph Actions[ëŒ€ì‘ ì „ëµ]
        E[ëª©í‘œê°€ & ìµì ˆ]
        F[ê´€ë§ & ë¶„í• ë§¤ìˆ˜]
        G[ì†ì ˆê°€ & ë¦¬ìŠ¤í¬ ê´€ë¦¬]
    end

    A --> B --> E
    A --> C --> F
    A --> D --> G
```

| ì‹œë‚˜ë¦¬ì˜¤ | ì œê³µ ì •ë³´ |
|----------|-----------|
| **ê°•ì„¸ (Bullish)** | ë°œìƒ í™•ë¥ , ëª©í‘œê°€, ìµì ˆ ì „ëµ |
| **íš¡ë³´ (Sideways)** | ë°œìƒ í™•ë¥ , ë°•ìŠ¤ê¶Œ ë²”ìœ„, ë¶„í• ë§¤ìˆ˜ ì „ëµ |
| **ì•½ì„¸ (Bearish)** | ë°œìƒ í™•ë¥ , ì†ì ˆê°€, ë¦¬ìŠ¤í¬ ê´€ë¦¬ ì „ëµ |

### 2. ì´ì¤‘ ë¶„ì„ ì²´ê³„

**í¬íŠ¸í´ë¦¬ì˜¤ ë ˆë²¨**ê³¼ **ì¢…ëª© ë ˆë²¨** ë‘ ê°€ì§€ ê´€ì ì—ì„œ ë¶„ì„

```mermaid
flowchart TB
    subgraph Portfolio[í¬íŠ¸í´ë¦¬ì˜¤ ë ˆë²¨]
        P1[ìì‚° ë°°ë¶„ ì „ëµ]
        P2[ì„¹í„° ë¶„ì‚°]
        P3[ë¦¬ìŠ¤í¬ ê´€ë¦¬]
    end

    subgraph Stock[ì¢…ëª© ë ˆë²¨]
        S1[ê°œë³„ ì¢…ëª© ë¶„ì„]
        S2[ë§¤ë§¤ íƒ€ì´ë°]
        S3[ëª©í‘œê°€/ì†ì ˆê°€]
    end

    Portfolio --> Stock
    P1 --> S1
    P2 --> S1
    P3 --> S3
```

| ë ˆë²¨ | ë¶„ì„ ë‚´ìš© |
|------|-----------|
| **í¬íŠ¸í´ë¦¬ì˜¤** | ì „ì²´ ìì‚° ë°°ë¶„, ì„¹í„° ë¶„ì‚°, 9ê°€ì§€ íŠ¸ë¦¬ê±° ê¸°ë°˜ ìë™ ë¦¬ë°¸ëŸ°ì‹±, VaR/CVaR ë¦¬ìŠ¤í¬ ê´€ë¦¬ |
| **ì¢…ëª©** | ê°œë³„ ì¢…ëª© ë§¤ìˆ˜/ë§¤ë„ íŒë‹¨, ëª©í‘œê°€, ì†ì ˆê°€, ë©€í‹° ì—ì´ì „íŠ¸ AI íˆ¬ì ì „ëµ |

### 3. AI ê¸°ë°˜ ë¶„ì„ ì‹œìŠ¤í…œ

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| **AI ë¹„ì„œ** | íˆ¬ì ì „ëµ ì§ˆë¬¸ì— ëŒ€í•œ ì‹¤ì‹œê°„ ë‹µë³€ (Hybrid Query Router + Text-to-SQL + RAG + Fine-tuned SQL) |
| **Stock Agent** | ì¢…ëª©ë³„ íˆ¬ì ì „ëµì„ 3-ì—ì´ì „íŠ¸ í˜‘ì—…ìœ¼ë¡œ ìƒì„± (Task-driven, Data/Narrative ë¶„ë¦¬) |
| **í€€íŠ¸ ë¶„ì„** | KR 73ê°œ ì „ëµ + US Factor Interaction + 3ëŒ€ Engine ê¸°ë°˜ ë©€í‹°íŒ©í„° ì ìˆ˜ ì‚°ì¶œ |
| **í¬íŠ¸í´ë¦¬ì˜¤ ë¦¬ë°¸ëŸ°ì‹± ë¦¬í¬íŠ¸** | LangGraph 3-ì—ì´ì „íŠ¸ê°€ ë¦¬ë°¸ëŸ°ì‹± ê²°ê³¼ë¥¼ 4ì„¹ì…˜ ë¦¬í¬íŠ¸ë¡œ ìë™ ìƒì„± |
| **ì¼ì¼ ì¶”ì²œ** | ì‹œì¥ë³„ Top 3 ì¢…ëª© ì¶”ì²œ (ë¦¬ìŠ¤í¬ ë ˆë²¨ë³„) |

### 4. ë¶„ì„ ëŒ€ìƒ

| ì‹œì¥ | ê±°ë˜ì†Œ | ì¢…ëª© ìˆ˜ |
|------|--------|---------|
| **í•œêµ­** | KOSPI, KOSDAQ | ~2,700+ |
| **ë¯¸êµ­** | NASDAQ, NYSE | ~4,500+ |

---

## ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ì „ì²´ êµ¬ì¡°

```mermaid
flowchart TB
    subgraph External[ì™¸ë¶€ ë°ì´í„°]
        KRX[KRX]
        DART[DART]
        AV[Alpha Vantage]
        FRED[FRED]
        BOK[í•œêµ­ì€í–‰]
        Yahoo[Yahoo Finance]
    end

    subgraph Data[1. ë°ì´í„° ìˆ˜ì§‘]
        Collect[Data Collector<br/>58+ í…Œì´ë¸”]
    end

    subgraph Quant[2. í€€íŠ¸ ë¶„ì„]
        KRQ[KR 73ê°œ ì „ëµ<br/>19ê°œ ì‹œì¥ ìƒíƒœ]
        USQ[US Factor Interaction<br/>3ëŒ€ Engine]
    end

    subgraph Services[3. AI ì„œë¹„ìŠ¤]
        Chat[AI ë¹„ì„œ<br/>Hybrid Query Router]
        Agent[Stock Agent<br/>3-ì—ì´ì „íŠ¸ í˜‘ì—…]
        Portfolio[Portfolio Engine<br/>9ê°€ì§€ ë¦¬ë°¸ëŸ°ì‹± íŠ¸ë¦¬ê±°]
    end

    subgraph Frontend[4. í”„ë¡ íŠ¸ì—”ë“œ]
        Client[Next.js 15 PWA<br/>Redis ìºì‹±]
    end

    External --> Collect
    Collect -->|Chain| KRQ
    Collect -->|Chain| USQ
    KRQ -->|Chain| Portfolio
    USQ -->|Chain| Portfolio
    KRQ --> Chat
    USQ --> Chat
    KRQ --> Agent
    USQ --> Agent
    Portfolio --> Client
    Chat --> Client
    Agent --> Client
```

### ìë™í™” íŒŒì´í”„ë¼ì¸

```mermaid
flowchart LR
    subgraph Scheduler[Cloud Scheduler]
        KR_Cron[KR 16:05 ì›”~ê¸ˆ]
        US_Cron[US 06:05 í™”~í† ]
    end

    subgraph Pipeline[ì„œë¹„ìŠ¤ ì²´ì´ë‹]
        Data[Data Collector<br/>13ê°œ ì‘ì—…]
        Quant[Quant Engine<br/>ì „ ì¢…ëª© ë¶„ì„]
        Port[Portfolio<br/>ì¶”ì²œ + ë¦¬ë°¸ëŸ°ì‹±]
    end

    KR_Cron --> Data
    US_Cron --> Data
    Data -->|POST /kr/run ë˜ëŠ” /us/run| Quant
    Quant -->|POST /recommend/daily| Port
```

---

## ë°ì´í„° íŒŒì´í”„ë¼ì¸

### ë°ì´í„° ìˆ˜ì§‘ (Data Collector)

Cloud Scheduler ê¸°ë°˜ ìë™ ìˆ˜ì§‘ ì‹œìŠ¤í…œìœ¼ë¡œ **58ê°œ+ í…Œì´ë¸”**ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

| ì‹œì¥ | í…Œì´ë¸” ìˆ˜ | ì£¼ìš” ë°ì´í„° |
|------|----------|-------------|
| **í•œêµ­** | 21ê°œ | ì‹œì„¸, íˆ¬ìì ë§¤ë§¤ë™í–¥, í”„ë¡œê·¸ë¨ë§¤ë§¤, ì™¸êµ­ì¸ ë³´ìœ , ë²¤ì¹˜ë§ˆí¬, ì¬ë¬´ì œí‘œ, ê²½ì œì§€í‘œ, ë¦¬ì„œì¹˜ ë¦¬í¬íŠ¸ |
| **ë¯¸êµ­** | 34ê°œ | ì‹œì„¸, ê¸°ìˆ ì§€í‘œ 15ì¢…, ì¬ë¬´ì œí‘œ 3ì¢…, ì˜µì…˜(GEX), ë§¤í¬ë¡œ(VIX/MOVE/ë‹¬ëŸ¬/ì‹ ìš©ìŠ¤í”„ë ˆë“œ/GDP/PMI), ë‚´ë¶€ìê±°ë˜, ì–´ë‹ìº˜ë¦°ë” |
| **ê³µí†µ** | 3ê°œ | ì‹œì¥ì§€ìˆ˜, í™˜ìœ¨, ê±°ë˜ì¼ ìº˜ë¦°ë” |

### ì¼ì¼ ìˆ˜ì§‘ ìŠ¤ì¼€ì¤„

| ì‹œì¥ | ì‹œê°„ (KST) | ì‘ì—… ìˆ˜ | ì£¼ìš” ì‘ì—… |
|------|-----------|---------|-----------|
| **KR ì¥ì¤‘** | 09:30~16:00 (30ë¶„ ê°„ê²©) | 2ê°œ | ì‹¤ì‹œê°„ ì‹œì„¸, ìƒì„¸ ë°ì´í„° |
| **KR ì¥ë§ˆê°** | 16:05 | 13ê°œ | íˆ¬ììë™í–¥, ì™¸êµ­ì¸, ì§€í‘œ ê³„ì‚°, ê²½ì œì§€í‘œ, ë¦¬ì„œì¹˜ |
| **US** | 06:05 | 13ê°œ | ì‹œì„¸, ETF, ì˜µì…˜, ë§¤í¬ë¡œ, ê¸°ìˆ ì§€í‘œ, ë‰´ìŠ¤, ë‚´ë¶€ìê±°ë˜ |

---

## AI ì±„íŒ… ì‹œìŠ¤í…œ

### Hybrid Query Router (v3 ì•„í‚¤í…ì²˜)

LangGraph ê¸°ë°˜ **16ë…¸ë“œ ì¡°ê±´ë¶€ ì›Œí¬í”Œë¡œìš°**ë¡œ ì‚¬ìš©ì ì§ˆë¬¸ì„ ë¶„ì„í•©ë‹ˆë‹¤.

```mermaid
flowchart TD
    START((Start)) --> QR[Query Router<br/>ë£°ë² ì´ìŠ¤, LLM 0íšŒ]

    QR -->|chat/explain| RG1[Response Generator]
    RG1 --> END1((End))

    QR -->|external| EDF1[External Data Fetcher]
    EDF1 --> RG2[Response Generator]
    RG2 --> END2((End))

    QR -->|simple| SR[Schema Retriever] --> SG[SQL Generator<br/>Fine-tuned ìš°ì„ ] --> SV[SQL Validator] --> SE[SQL Executor]
    SE --> CE1[Context Enricher]

    QR -->|complex| QD[Query Decomposer<br/>LLM 1íšŒ: sub-query ë¶„í•´]
    QD --> PSP[Parallel SQL Pipeline<br/>sub-queryë³„ ë³‘ë ¬ ì‹¤í–‰]
    PSP --> CE2[Context Enricher]

    CE1 -->|db_only| RG3[Response Generator]
    CE1 -->|hybrid| EDF2[External Fetcher] --> HA[Hybrid Analyzer] --> RG4[Response Generator]
    CE2 -->|db_only| RG3
    CE2 -->|hybrid| EDF2

    RG3 --> END3((End))
    RG4 --> END4((End))
```

### ì•„í‚¤í…ì²˜ ì§„í™”

| ë²„ì „ | êµ¬ì¡° | ì‘ë‹µ ì‹œê°„ | SQL 1íšŒ í†µê³¼ìœ¨ |
|------|------|----------|---------------|
| v1 | ì§ë ¬ íŒŒì´í”„ë¼ì¸ (5-8íšŒ ìˆœì°¨ LLM) | 25-70ì´ˆ | ~60% |
| v2 | Query Decomposition (3 step) | 10-20ì´ˆ | ~90% |
| **v3 (í˜„ì¬)** | Hybrid Query Router (simpleâ†’FT / complexâ†’QD) | **2-20ì´ˆ** | **~90%+** |

### í•µì‹¬ ê¸°ìˆ 

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| **Hybrid Query Router** | ë£°ë² ì´ìŠ¤(LLM 0íšŒ)ë¡œ simple/complex/chat/external 4-way ë¼ìš°íŒ… |
| **Fine-tuned SQL** | GPT-4.1-mini ê¸°ë°˜ 695ê°œ í•™ìŠµ ë°ì´í„°, í…Œì´ë¸” 5ê°œ ì´í•˜ ì‹œ ìë™ ì„ íƒ, ì‹¤íŒ¨ ì‹œ Claude Fallback |
| **ë‹¤ì¸µ RAG** | Schema RAG (57ê°œ í…Œì´ë¸”) + Few-Shot RAG (211ê°œ ì˜ˆì œ) + Term Mapper (262ê°œ ë§¤í•‘) |
| **ì¢…ëª©ëª… í•´ì„** | 5ë‹¨ê³„ ìºìŠ¤ì¼€ì´ë”© ë§¤ì¹­ (ì •í™•â†’ë³„ì¹­â†’ë¶€ë¶„â†’í¼ì§€â†’LLM, rapidfuzz ìëª¨ ë¶„í•´) |
| **ì‹œì¥ë³„ ìºì‹±** | KR ì¥ì¤‘ 30ë¶„ / ì¥ë§ˆê° ë‹¤ìŒ ê°œì¥ê¹Œì§€ / US ë‹¤ìŒ 08:00ê¹Œì§€ |
| **ì™¸ë¶€ API** | Naver ë‰´ìŠ¤, DART ì „ìê³µì‹œ, Serper ì›¹ ê²€ìƒ‰ (Graceful Degradation) |
| **BOTH ë§ˆì¼“** | sub-queryë³„ ë§ˆì¼“ ë¶„ë¦¬ë¡œ KR+US í†µí•© ê²€ìƒ‰ êµ¬ì¡°ì  í•´ì†Œ |

---

## í€€íŠ¸ ë¶„ì„ ì—”ì§„

í•œêµ­/ë¯¸êµ­ ì•½ **7,000+ ì¢…ëª©**ì„ ì¼ê´„ ë¶„ì„í•˜ì—¬ íˆ¬ì ë“±ê¸‰(ê°•ë ¥ ë§¤ìˆ˜ ~ ê°•ë ¥ ë§¤ë„)ì„ ì‚°ì¶œí•©ë‹ˆë‹¤.

### í•œêµ­ ëª¨ë¸

```mermaid
flowchart LR
    subgraph Factors[4ëŒ€ íŒ©í„° - 73ê°œ ì „ëµ]
        V[Value 15ê°œ]
        Q[Quality 17ê°œ]
        M[Momentum 23ê°œ]
        G[Growth 18ê°œ]
    end

    subgraph Market[ì‹œì¥ ìƒíƒœ]
        C[9ê°€ì§€ ì¡°ê±´ ë¶„ì„]
        S[19ê°œ ì‹œì¥ ìƒíƒœ ë¶„ë¥˜]
    end

    subgraph Weight[ê°€ì¤‘ì¹˜]
        IC[IC ê¸°ë°˜ ë™ì  ê°€ì¤‘ì¹˜]
    end

    Factors --> Market --> Weight --> Grade[íˆ¬ì ë“±ê¸‰]
```

| íŒ©í„° | ì „ëµ ìˆ˜ | ì£¼ìš” ì „ëµ |
|------|---------|-----------|
| **Value** | 15ê°œ | Magic Formula, EV/EBITDA, ìˆœìì‚°í• ì¸, ì£¼ì£¼í™˜ì›ìœ¨ |
| **Quality** | 17ê°œ | ROE ì¼ê´€ì„±, ì˜ì—…ë§ˆì§„, ì´ìë³´ìƒë°°ìœ¨, í˜„ê¸ˆíë¦„ |
| **Momentum** | 23ê°œ | ê°€ê²© ëª¨ë©˜í…€, RSI, MACD, ì™¸êµ­ì¸ ìˆœë§¤ìˆ˜ |
| **Growth** | 18ê°œ | ë§¤ì¶œ/EPS/ì˜ì—…ì´ìµ ì„±ì¥ë¥ , R&D íˆ¬ì |

### ë¯¸êµ­ ëª¨ë¸

```mermaid
flowchart TB
    subgraph Factors[4ëŒ€ íŒ©í„° + Factor Interaction]
        VL[Value VL1-VL6]
        QA[Quality QA1-QA6]
        MO[Momentum MO1-MO6]
        FG[Growth FG1-FG6 + NQ1-NQ4]
        INT[Interaction I1-I5<br/>ë¹„ì„ í˜• ê´€ê³„ í•´ê²°]
    end

    subgraph Engines[3ëŒ€ Engine]
        EV[Event Engine<br/>ì‹¤ì /ì˜µì…˜/ë‚´ë¶€ì]
        MA[Macro Engine<br/>ê¸ˆë¦¬/ì¸í”Œë ˆ/ìˆ˜ìµë¥ ê³¡ì„ ]
        VO[Volatility Engine<br/>IV Percentile ê¸°ë°˜]
    end

    subgraph Optimize[ìµœì í™”]
        NAS[NASDAQ ì „ìš©]
        HC[í—¬ìŠ¤ì¼€ì–´ ì„¹í„°]
        EX[ê±°ë˜ì†Œë³„]
    end

    Factors --> Engines --> Optimize --> Grade[íˆ¬ì ë“±ê¸‰]
```

| êµ¬ë¶„ | ì„¤ëª… |
|------|------|
| **Factor Interaction** | Growth x Quality, Growth x Momentum ë“± 5ê°œ êµì°¨í•­ (Base 70% + Interaction 30%) |
| **Event Engine** | ì‹¤ì  ì„ë°•(-5ì ), Put/Call Ratio, Cluster Buying(+10ì ) ë“± |
| **Macro Engine** | ê¸ˆë¦¬ x ì¸í”Œë ˆì´ì…˜ ë§¤íŠ¸ë¦­ìŠ¤, Yield Curve Signal |
| **Volatility Engine** | Factorë³„ ë¯¼ê°ë„ ì°¨ë“± ì ìš©, IV Percentile ê¸°ë°˜ ì¡°ì • |
| **ì‹œì¥ ë ˆì§** | AI_BULL, TIGHTENING, RECOVERY, CRISIS, NEUTRAL 5ê°œ ë ˆì§ ê°ì§€ |

### ì˜ˆì¸¡ ì ì¤‘ë¥  ì¶”ì 

í€€íŠ¸ ë“±ê¸‰ì˜ ì‹¤ì œ ì„±ê³¼ë¥¼ **90ì¼ í›„ ìˆ˜ìµë¥ **ë¡œ ê²€ì¦í•˜ì—¬ ëª¨ë¸ ì‹ ë¢°ë„ë¥¼ ì¶”ì í•©ë‹ˆë‹¤.

---

## í¬íŠ¸í´ë¦¬ì˜¤ ì—”ì§„

### 7ë‹¨ê³„ ìƒì„± íŒŒì´í”„ë¼ì¸

```mermaid
flowchart LR
    A[1. ì…ë ¥ ê²€ì¦<br/>ì˜ˆì‚°/êµ­ê°€/ë¦¬ìŠ¤í¬] --> B[2. ìœ ë‹ˆë²„ìŠ¤ í•„í„°<br/>ê±°ë˜ëŒ€ê¸ˆ/ë“±ê¸‰/ì ì¤‘ë¥ ]
    B --> C[3. ë¦¬ìŠ¤í¬ í•„í„°<br/>ë³€ë™ì„±/MDD/CVaR/Tail Beta]
    C --> D[4. ì¢…ëª© ì„ ì •<br/>ë“±ê¸‰ ì¼ê´€ì„±/ì„¹í„°/í‹°ì–´]
    D --> E[5. ë¹„ì¤‘ ë°°ë¶„<br/>Risk Parity + VaR]
    E --> F[6. ìˆ˜ëŸ‰ í™˜ì‚°<br/>í˜¸ê°€ ë‹¨ìœ„ ì¡°ì •]
    F --> G[7. DB ì €ì¥]
```

### 9ê°€ì§€ ë¦¬ë°¸ëŸ°ì‹± íŠ¸ë¦¬ê±°

| íŠ¸ë¦¬ê±° | ì„¤ëª… | ì‹¬ê°ë„ |
|--------|------|--------|
| **GRADE_DROP** | í€€íŠ¸ ë“±ê¸‰ 2ë‹¨ê³„ ì´ìƒ í•˜ë½ | WARNING |
| **STOP_LOSS** | CVaR ê¸°ë°˜ ë™ì  ì†ì ˆ | CRITICAL |
| **TRAILING_STOP** | Chandelier Exit (ê³ ì  ëŒ€ë¹„ 3xATR í•˜ë½) | WARNING |
| **SCALE_OUT** | ë‹¨ê³„ë³„ ìµì ˆ (1R, 2R ë„ë‹¬ ì‹œ 33%ì”©) | INFO |
| **MDD_LIMIT** | í¬íŠ¸í´ë¦¬ì˜¤ MDD í•œë„ ë„ë‹¬ | CRITICAL |
| **SUSPENDED** | ê±°ë˜ ì •ì§€ ê°ì§€ | CRITICAL |
| **MARKET_CRASH** | ë²¤ì¹˜ë§ˆí¬ ê¸‰ë½ ì‹œ Tail Beta ê°€ì¤‘ ëŒ€ì‘ | CRITICAL |
| **VAR_LIMIT** | í¬íŠ¸í´ë¦¬ì˜¤ VaR 60ì¼ í•œë„ ì´ˆê³¼ | WARNING |
| **CASH_DRAG** | ìœ íœ´ í˜„ê¸ˆ ë¹„ìœ¨ í•œë„ ì´ˆê³¼ | WARNING |

### ë¦¬ë°¸ëŸ°ì‹± ë¦¬í¬íŠ¸ ì—ì´ì „íŠ¸

LangGraph ê¸°ë°˜ **3-ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜**ë¡œ ë¦¬ë°¸ëŸ°ì‹± ê²°ê³¼ë¥¼ ë¶„ì„í•˜ì—¬ íˆ¬ìììš© ë¦¬í¬íŠ¸ë¥¼ ìë™ ìƒì„±í•©ë‹ˆë‹¤.

```mermaid
flowchart LR
    subgraph Data[ë°ì´í„° ìˆ˜ì§‘]
        Collect[DB 11ì¢… ìˆ˜ì§‘]
        Pre[ì—ì´ì „íŠ¸ë³„ ì „ì²˜ë¦¬]
    end

    subgraph Parallel[ë³´ì¡° ì—ì´ì „íŠ¸ - ë³‘ë ¬]
        MA[Market Agent<br/>ì‹œì¥ í™˜ê²½ ë¶„ì„]
        TA[Trade Agent<br/>ê±°ë˜ ê²°ì • ë¶„ì„]
    end

    subgraph Main[ë©”ì¸ ì—ì´ì „íŠ¸]
        RA[Report Agent<br/>4ì„¹ì…˜ ë¦¬í¬íŠ¸ ìƒì„±]
    end

    Collect --> Pre
    Pre --> MA
    Pre --> TA
    MA --> RA
    TA --> RA
    RA --> Out[DB ì €ì¥]
```

| ì„¹ì…˜ | ë‚´ìš© | ìƒì„± ë°©ì‹ |
|------|------|----------|
| **Executive Summary** | í—¤ë“œë¼ì¸, í•µì‹¬ í¬ì¸íŠ¸, ê²°ë¡ , í›„ì† ì¡°ì¹˜ | LLM |
| **ë°°ê²½** | íŠ¸ë¦¬ê±° ì‚¬ìœ , ì‹œì¥ ì»¨í…ìŠ¤íŠ¸ | LLM |
| **ì‹¤í–‰** | ê±°ë˜ í…Œì´ë¸”, ë§¤ë„/ë§¤ìˆ˜ ê²°ì • ìƒì„¸ | Trade Agent ì§ì ‘ ë§¤í•‘ (LLM ë¯¸ì‚¬ìš©) |
| **ê²°ê³¼** | ë¦¬ë°¸ëŸ°ì‹± í›„ ìƒíƒœ, ê¸°ëŒ€ íš¨ê³¼, ë¦¬ìŠ¤í¬ | LLM |

### ì¼ì¼ ìš´ì˜

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| **ì¼ì¼ ì¶”ì²œ Top 3** | ë¦¬ìŠ¤í¬ ë ˆë²¨ë³„ Top 3 ì¢…ëª© ì¶”ì²œ (ì•ˆì •í˜•/ê· í˜•í˜•/ê³µê²©í˜•) |
| **ìë™ ë¦¬ë°¸ëŸ°ì‹±** | LIVE í¬íŠ¸í´ë¦¬ì˜¤ ëŒ€ìƒ 9ê°€ì§€ íŠ¸ë¦¬ê±° ì²´í¬ ë° ìë™ ì‹¤í–‰ |
| **ì¼ì¼ ë¦¬í¬íŠ¸** | 11ê°œ ì„¹ì…˜ (ì„±ê³¼, ê±´ê°•/ì£¼ì˜/ìœ„í—˜ ì‹ í˜¸, ì‹œì¥ ì‹¬ë¦¬, ë“±ê¸‰ ë³€ë™, ê¸°ìˆ ì  ìš”ì•½ ë“±) |
| **ì¼ì¼ ì„±ê³¼ ì¶”ì ** | í¬íŠ¸í´ë¦¬ì˜¤/ë²¤ì¹˜ë§ˆí¬ ìˆ˜ìµë¥  ë¹„êµ, ì¢…ëª©ë³„ ì„±ê³¼ |

---

## ì¢…ëª© íˆ¬ì ì „ëµ Multi-Agent

### Task-driven 3-ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜

> ì‹œìŠ¤í…œì´ ëª¨ë“  ìˆ˜ì¹˜ë¥¼ ê³„ì‚°í•˜ê³ , LLMì€ í•´ì„(narrative)ë§Œ ìƒì„±

```mermaid
flowchart LR
    subgraph Data[ë°ì´í„° ìˆ˜ì§‘]
        DB[(PostgreSQL<br/>60+ í…Œì´ë¸”)]
        Search[ì›¹ ê²€ìƒ‰<br/>Serper / Naver]
    end

    subgraph Parallel[ë³´ì¡° ì—ì´ì „íŠ¸ - ë³‘ë ¬]
        MR[Market Regime Agent<br/>Risk-On/Off íŒë‹¨]
        SR[Stock Research Agent<br/>ì •ì„±ì  ë¶„ì„]
    end

    subgraph Main[ë©”ì¸ ì—ì´ì „íŠ¸]
        AA[Analysis Agent<br/>ìµœì¢… ì „ëµ ìƒì„±]
    end

    DB --> MR
    DB --> SR
    Search --> MR
    Search --> SR
    MR --> AA
    SR --> AA
    DB --> AA
    AA --> Strategy[ì‹œë‚˜ë¦¬ì˜¤ë³„ íˆ¬ì ì „ëµ]
```

| ì—ì´ì „íŠ¸ | ì—­í•  | ì…ë ¥ | ì¶œë ¥ |
|----------|------|------|------|
| **Market Regime** | ê¸€ë¡œë²Œ ì‹œì¥ í™˜ê²½ ë¶„ì„ | VIX, ë‹¬ëŸ¬ì¸ë±ìŠ¤, êµ­ì±„, ê¸ˆë¦¬, ì‹ ìš©ìŠ¤í”„ë ˆë“œ, MOVE | risk_on / risk_off / neutral |
| **Stock Research** | ì •ì„±ì  ë¶„ì„ | ë‰´ìŠ¤, ì‹¤ì , ë‚´ë¶€ìê±°ë˜, ê³µì‹œ | ë¦¬ì„œì¹˜ ìš”ì•½ JSON |
| **Analysis** | ìµœì¢… íˆ¬ì ì „ëµ ìƒì„± | ëª¨ë“  ë°ì´í„° + ë³´ì¡° ì—ì´ì „íŠ¸ ê²°ê³¼ | ì‹œë‚˜ë¦¬ì˜¤ë³„ ì™„ì „í•œ ì „ëµ |

### ì„¤ê³„ ì›ì¹™

| ì›ì¹™ | ì„¤ëª… |
|------|------|
| **Data/Narrative ë¶„ë¦¬** | ì‹œìŠ¤í…œì´ data ì„¹ì…˜ ê³„ì‚°, LLMì´ narrative ì„¹ì…˜ë§Œ ìƒì„± |
| **ê²€ì¦ ë£¨í”„** | ìŠ¤í‚¤ë§ˆ + ë°ì´í„° ì¼ê´€ì„± ê²€ì¦, ìµœëŒ€ 2íšŒ ì¬ì‹œë„ |
| **Graceful Degradation** | ë³´ì¡° ì—ì´ì „íŠ¸ ì‹¤íŒ¨ ì‹œì—ë„ ë©”ì¸ í”Œë¡œìš° ê³„ì† ì§„í–‰ |
| **ì‹œì¥ë³„ ì ì‘** | KR(íˆ¬ìì ìˆ˜ê¸‰, ë„¤ì´ë²„ ë‰´ìŠ¤) / US(ì˜µì…˜ ë°ì´í„°, ë‚´ë¶€ìê±°ë˜, sentiment) |

---

## ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ

PostgreSQL ê¸°ë°˜ **58ê°œ+ í…Œì´ë¸”**ë¡œ êµ¬ì„±ëœ ë°ì´í„° ëª¨ë¸ì…ë‹ˆë‹¤.

### íšŒì›/ì„œë¹„ìŠ¤

```mermaid
erDiagram
    users ||--o{ sessions : has
    users ||--o| user_limits : has
    users ||--o{ favorite_portfolios : has
    users ||--o{ favorite_stocks : has
    users ||--o{ chat_sessions : creates
    chat_sessions ||--o{ chat_messages : contains

    users {
        uuid id PK
        varchar oauth_provider
        varchar oauth_id
        varchar nickname
        varchar email
        boolean is_active
        timestamptz created_at
    }

    sessions {
        text id PK
        uuid user_id FK
        timestamptz expires_at
        varchar ip_address
    }

    user_limits {
        uuid id PK
        uuid user_id FK
        integer daily_chat_limit
        varchar limit_type
    }

    favorite_portfolios {
        uuid id PK
        uuid user_id FK
        varchar portfolio_id
    }

    favorite_stocks {
        uuid id PK
        uuid user_id FK
        varchar symbol
        varchar market
    }

    chat_sessions {
        uuid id PK
        uuid user_id FK
        text title
        varchar chat_service_type
        integer message_count
    }

    chat_messages {
        uuid id PK
        uuid session_id FK
        text role
        text content
        integer tokens_used
    }
```

### í•œêµ­ ì£¼ì‹

```mermaid
erDiagram
    kr_stock_basic ||--o{ kr_intraday_total : has
    kr_stock_basic ||--o{ kr_indicators : has
    kr_stock_basic ||--o{ kr_stock_grade : has
    kr_stock_basic ||--o| kr_stock_detail : has
    kr_stock_basic ||--o{ kr_investor_daily_trading : has
    kr_stock_basic ||--o{ kr_stock_prediction_stats : has

    kr_stock_basic {
        varchar symbol PK
        varchar stock_name
        varchar exchange
        date listed_date
        bigint listed_shares
    }

    kr_intraday_total {
        varchar symbol FK
        date date
        decimal close
        decimal change_rate
        bigint volume
        bigint trading_value
        decimal market_cap
    }

    kr_indicators {
        varchar symbol FK
        date date
        decimal rsi
        decimal macd
        decimal bollinger_upper
        decimal bollinger_lower
        decimal var_95
        decimal cvar_95
        decimal beta
    }

    kr_stock_grade {
        varchar symbol FK
        date date
        varchar final_grade
        decimal final_score
        decimal value_score
        decimal quality_score
        decimal momentum_score
        decimal growth_score
        json strategy
    }

    kr_stock_detail {
        varchar symbol FK
        varchar industry
        varchar sector
        varchar ceo_name
    }

    kr_investor_daily_trading {
        varchar symbol FK
        date date
        bigint foreign_net
        bigint inst_net
    }

    kr_stock_prediction_stats {
        varchar symbol FK
        decimal buy_hit_rate
        decimal sell_hit_rate
        integer total_predictions
    }
```

### ë¯¸êµ­ ì£¼ì‹

```mermaid
erDiagram
    us_stock_basic ||--o{ us_daily : has
    us_stock_basic ||--o{ us_indicators : has
    us_stock_basic ||--o{ us_stock_grade : has
    us_stock_basic ||--o{ us_income_statement : has
    us_stock_basic ||--o{ us_balance_sheet : has
    us_stock_basic ||--o{ us_option_daily_summary : has
    us_stock_basic ||--o{ us_stock_prediction_stats : has

    us_stock_basic {
        varchar symbol PK
        text stock_name
        varchar exchange
        varchar sector
        varchar industry
        bigint market_cap
        decimal per
        decimal beta
    }

    us_daily {
        varchar symbol FK
        date date
        decimal close
        decimal change_rate
        bigint volume
    }

    us_indicators {
        varchar symbol FK
        date date
        decimal rsi
        decimal macd
        decimal bollinger_upper
        decimal atr
        decimal var_95
        decimal cvar_95
    }

    us_stock_grade {
        varchar symbol FK
        date date
        varchar final_grade
        decimal final_score
        decimal value_score
        decimal quality_score
        decimal momentum_score
        decimal growth_score
        json strategy
    }

    us_income_statement {
        varchar symbol FK
        date fiscal_date_ending
        bigint total_revenue
        bigint operating_income
        bigint net_income
    }

    us_balance_sheet {
        varchar symbol FK
        date fiscal_date_ending
        bigint total_assets
        bigint total_liabilities
        bigint total_shareholder_equity
    }

    us_option_daily_summary {
        varchar symbol FK
        date date
        decimal put_call_ratio
        decimal iv_percentile
        decimal net_gex
    }

    us_stock_prediction_stats {
        varchar symbol FK
        decimal buy_hit_rate
        decimal sell_hit_rate
        integer total_predictions
    }
```

### í¬íŠ¸í´ë¦¬ì˜¤

```mermaid
erDiagram
    portfolio_master ||--o{ portfolio_holdings : contains
    portfolio_master ||--o{ portfolio_transactions : records
    portfolio_master ||--o{ portfolio_rebalancing : schedules
    portfolio_master ||--o{ portfolio_daily_performance : tracks
    portfolio_rebalancing ||--o{ portfolio_rebalancing_detail : details

    portfolio_master {
        varchar portfolio_id PK
        varchar portfolio_name
        varchar status
        varchar country
        varchar risk_level
        bigint initial_budget
        integer target_stock_count
    }

    portfolio_holdings {
        serial id PK
        varchar portfolio_id FK
        varchar symbol
        varchar stock_name
        integer shares
        decimal avg_price
        decimal current_weight
        decimal unrealized_pnl
    }

    portfolio_transactions {
        serial transaction_id PK
        varchar portfolio_id FK
        varchar symbol
        varchar transaction_type
        date transaction_date
        integer shares
        decimal price
        decimal realized_pnl
    }

    portfolio_rebalancing {
        serial rebalancing_id PK
        varchar portfolio_id FK
        varchar rebalancing_type
        varchar status
        date planned_date
        integer stocks_added
        integer stocks_removed
    }

    portfolio_rebalancing_detail {
        serial id PK
        integer rebalancing_id FK
        varchar symbol
        varchar action
        varchar trigger_reason
    }

    portfolio_daily_performance {
        serial id PK
        varchar portfolio_id FK
        date date
        decimal total_value
        decimal daily_return
        decimal cumulative_return
        decimal sharpe_ratio_30d
        jsonb daily_report
    }
```

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

**ë–¡ìƒ**ì€ 8ê°œì˜ ë…ë¦½ì ì¸ ì €ì¥ì†Œë¡œ êµ¬ì„±ëœ ë©€í‹°ë ˆí¬ ì•„í‚¤í…ì²˜ì…ë‹ˆë‹¤.

| ì €ì¥ì†Œ | ì„¤ëª… | ê¸°ìˆ  ìŠ¤íƒ |
|--------|------|-----------|
| [**overview**](https://github.com/vinjung/alphafolio_overview) | í”„ë¡œì íŠ¸ ì„¤ëª… | - |
| [**client**](https://github.com/vinjung/alphafolio_client) | Frontend (UI/UX) | Next.js 15, React 19, Tailwind CSS 4, Redis |
| [**api**](https://github.com/vinjung/alphafolio_api) | AI ì±„íŒ… ë°±ì—”ë“œ API | FastAPI, LangGraph, ChromaDB, Fine-tuned GPT |
| [**data**](https://github.com/vinjung/alphafolio_data) | ë°ì´í„° ìë™ ìˆ˜ì§‘ & ì§€í‘œ ê³„ì‚° | FastAPI, asyncpg, Cloud Scheduler |
| [**chat**](https://github.com/vinjung/alphafolio_chat) | AI ë¹„ì„œ ê°œë°œí™˜ê²½ | LangChain, LangGraph, ChromaDB |
| [**quant**](https://github.com/vinjung/alphafolio_quant) | ë©€í‹°íŒ©í„° í€€íŠ¸ ë¶„ì„ ì—”ì§„ | NumPy, SciPy, hmmlearn |
| [**stock_agent**](https://github.com/vinjung/alphafolio_stock_agent) | ì¢…ëª© íˆ¬ì ì „ëµ Multi-Agent AI | LangGraph, Task-driven Architecture |
| [**portfolio**](https://github.com/vinjung/alphafolio_portfolio) | í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„± & ë¦¬ë°¸ëŸ°ì‹± ì—”ì§„ | Risk Parity, VaR/CVaR, LangGraph |

### ê° ì €ì¥ì†Œë³„ í•µì‹¬ ê¸°ëŠ¥

<details>
<summary><b>client</b> - Frontend</summary>

- Next.js 15 App Router + React 19 + Tailwind CSS 4
- Mobile-First PWA, Kakao OAuth ì¸ì¦
- Redis ê¸°ë°˜ ì‹œì¥ë³„ TTL ìºì‹± (KR/US ê°±ì‹  ì‹œì  ì—°ë™)
- ì‹¤ì‹œê°„ SSE ìŠ¤íŠ¸ë¦¬ë° AI ì±„íŒ… ì¸í„°í˜ì´ìŠ¤
- ìœ ë£ŒíšŒì› ì „ìš© ì½˜í…ì¸  (Stock Agent ì „ëµ ìƒì„±)
- ì¼ì¼ ì¶”ì²œì£¼ Top 3, ì¦ê²¨ì°¾ê¸°, ë¦¬í…ì…˜/UTM ì¶”ì 

</details>

<details>
<summary><b>api</b> - AI ì±„íŒ… ë°±ì—”ë“œ</summary>

- Hybrid Query Router (v3): ë£°ë² ì´ìŠ¤ 4-way ë¼ìš°íŒ… (simple/complex/chat/external)
- 16ë…¸ë“œ LangGraph ì¡°ê±´ë¶€ ì›Œí¬í”Œë¡œìš°
- Fine-tuned SQL (GPT-4.1-mini, 695ê°œ í•™ìŠµ ë°ì´í„°) + Claude Fallback
- ë‹¤ì¸µ RAG: Schema RAG + Few-Shot RAG (211ê°œ) + Term Mapper (262ê°œ)
- 5ë‹¨ê³„ ì¢…ëª©ëª… í•´ì„ (ì •í™•â†’ë³„ì¹­â†’ë¶€ë¶„â†’í¼ì§€â†’LLM)
- ì‹œì¥ë³„ ì§€ëŠ¥í˜• ìºì‹±, ë¹„ë™ê¸° ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬ (Redis Stream)

</details>

<details>
<summary><b>chat</b> - AI ë¹„ì„œ ê°œë°œí™˜ê²½</summary>

- api ì €ì¥ì†Œì™€ ë™ê¸°í™”ë˜ëŠ” ê°œë°œ í™˜ê²½ (`sync_to_front.sh`)
- v1(ì§ë ¬) â†’ v2(Query Decomposition) â†’ v3(Hybrid Router) ì•„í‚¤í…ì²˜ ì§„í™”
- Fine-tuning íŒŒì´í”„ë¼ì¸ (ë°ì´í„° ìƒì„± â†’ ë¶„í•  â†’ í•™ìŠµ â†’ í‰ê°€)
- ChromaDB ë²¡í„° ì¸ë±ì‹±, RAG ì¬ì¸ë±ì‹± ìŠ¤í¬ë¦½íŠ¸

</details>

<details>
<summary><b>data</b> - Data Collector</summary>

- í•œ/ë¯¸ ì£¼ì‹ ì‹œì¥ ë°ì´í„° ìë™ ìˆ˜ì§‘ (58ê°œ+ í…Œì´ë¸”)
- Google Cloud Scheduler ê¸°ë°˜ 6ê°œ ì •ê¸° ìŠ¤ì¼€ì¤„
- KR 13ê°œ + US 13ê°œ ì¼ì¼ ì‘ì—… (ì¬ê°œ ê°€ëŠ¥í•œ step ì‹œìŠ¤í…œ)
- ì„œë¹„ìŠ¤ ì²´ì´ë‹: Data â†’ Quant â†’ Portfolio ìë™ ì—°ê²°
- ê±°ë˜ì¼ ìë™ íŒë‹¨, API Rate Limiting ëŒ€ì‘, ì¬ì‹œë„ ë¡œì§

</details>

<details>
<summary><b>quant</b> - Quant Engine</summary>

- **KR**: 4ëŒ€ íŒ©í„° 73ê°œ ì „ëµ, 19ê°œ ì‹œì¥ ìƒíƒœ, IC ê¸°ë°˜ ë™ì  ê°€ì¤‘ì¹˜
- **US**: Factor Interaction (I1-I5), 3ëŒ€ Engine (Event/Macro/Volatility), ê±°ë˜ì†Œ/ì„¹í„°ë³„ ìµœì í™”
- ì˜ˆì¸¡ ì ì¤‘ë¥  ì¶”ì  ì‹œìŠ¤í…œ (90ì¼ í›„ ê²€ì¦)
- ë°°ì¹˜ ìµœì í™” 99.96% ì¿¼ë¦¬ ê°ì†Œ (36,400 â†’ 15)
- Railway HTTP ì„œë¹„ìŠ¤ ë°°í¬

</details>

<details>
<summary><b>stock_agent</b> - Multi-Agent AI</summary>

- Task-driven V2: Data/Narrative ë¶„ë¦¬ (LLM ìˆ«ì í™˜ê° ë°©ì§€)
- 3-ì—ì´ì „íŠ¸: Market Regime + Stock Research (ë³‘ë ¬) â†’ Analysis Agent
- ê²€ì¦ ë£¨í”„ (ìŠ¤í‚¤ë§ˆ + ë°ì´í„° ì¼ê´€ì„±, ìµœëŒ€ 2íšŒ ì¬ì‹œë„)
- KR/US ì‹œì¥ë³„ ì ì‘ (ì˜µì…˜, ìˆ˜ê¸‰, ë‰´ìŠ¤ ì†ŒìŠ¤ ì°¨ì´)
- FastAPI REST API + Redis Lock (ë™ì‹œ ì‹¤í–‰ ë°©ì§€)

</details>

<details>
<summary><b>portfolio</b> - Portfolio Engine</summary>

- 7ë‹¨ê³„ í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„± íŒŒì´í”„ë¼ì¸ (Risk Parity, VaR/CVaR/Tail Beta)
- 9ê°€ì§€ íŠ¸ë¦¬ê±° ê¸°ë°˜ ìë™ ë¦¬ë°¸ëŸ°ì‹±
- LangGraph 3-ì—ì´ì „íŠ¸ ë¦¬ë°¸ëŸ°ì‹± ë¦¬í¬íŠ¸ (Market + Trade + Report)
- ì¼ì¼ ì¶”ì²œ Top 3 + LIVE í¬íŠ¸í´ë¦¬ì˜¤ ìë™ ë¦¬ë°¸ëŸ°ì‹±
- ì¼ì¼ ë¦¬í¬íŠ¸ v2.0 (11ê°œ ì„¹ì…˜)
- ê´€ë¦¬ì GUI (Jinja2)

</details>

---

## ê¸°ìˆ  ìŠ¤íƒ

### Backend

| êµ¬ë¶„ | ê¸°ìˆ  |
|------|------|
| **Language** | Python 3.12 |
| **Framework** | FastAPI |
| **Database** | PostgreSQL (asyncpg) |
| **Vector DB** | ChromaDB |
| **Cache/Stream** | Redis (3 DB Index: Cache/Task/Stream) |
| **AI Framework** | LangChain 0.3, LangGraph 0.5+ |
| **LLM** | Claude Sonnet 4.5 + Fine-tuned GPT-4.1-mini |

### Frontend

| êµ¬ë¶„ | ê¸°ìˆ  |
|------|------|
| **Language** | TypeScript 5.0+ |
| **Framework** | Next.js 15 (App Router, Turbopack) |
| **UI Library** | React 19 |
| **State** | Zustand |
| **Styling** | Tailwind CSS 4 |
| **ORM** | Drizzle ORM |

### Infrastructure

| êµ¬ë¶„ | ê¸°ìˆ  |
|------|------|
| **Hosting** | Railway |
| **Scheduler** | Google Cloud Scheduler |
| **Streaming** | SSE (Redis Stream ê¸°ë°˜) |
| **Auth** | Kakao OAuth 2.0 (Arctic) |

### Data Sources

| ì†ŒìŠ¤ | ë°ì´í„° |
|------|--------|
| **KRX** | í•œêµ­ ì£¼ì‹ ì‹œì„¸, íˆ¬ìì ë™í–¥, í”„ë¡œê·¸ë¨ ë§¤ë§¤, ë²¤ì¹˜ë§ˆí¬ |
| **DART** | ì¬ë¬´ì œí‘œ, ê¸°ì—… ê³µì‹œ, ë°°ë‹¹, ì„ì›, ìì‚¬ì£¼ |
| **Alpha Vantage** | ë¯¸êµ­ ì£¼ì‹ ì‹œì„¸, ì¬ë¬´ì œí‘œ, ì˜µì…˜, ë‰´ìŠ¤ |
| **FRED** | VIX, MOVE, ë‹¬ëŸ¬ì¸ë±ìŠ¤, ì‹ ìš©ìŠ¤í”„ë ˆë“œ, GDP, PMI, ê¸ˆë¦¬ |
| **í•œêµ­ì€í–‰** | í•œêµ­ ê²½ì œ ì§€í‘œ |
| **Yahoo Finance** | ETF, ë³´ì¡° ì‹œì„¸ ë°ì´í„° |
| **Finnhub** | ë¯¸êµ­ ì‹¬ë³¼ ë§ˆìŠ¤í„° |

---

## âš ï¸ **ì‚¬ì—… ì½”ë“œ - ì œí•œì  ê³µê°œ**

ğŸš« **ìƒì—…ì  ì‚¬ìš© / ìˆ˜ì • / ì¬ë°°í¬ ì—„ê²© ê¸ˆì§€**
â° **ì„ì‹œ ê³µê°œ í›„ Private ì „í™˜ ì˜ˆì •**
ğŸ‘ï¸ **ì°¸ê³ ìš©ìœ¼ë¡œë§Œ ì‚¬ìš©í•˜ì„¸ìš”**

## License
[CC BY-NC-ND 4.0](https://creativecommons.org/licenses/by-nc-nd/4.0/)
